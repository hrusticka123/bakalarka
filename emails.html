<html>
<head>
<title>Emails</title>
<link href='iconsandstuff.css' rel="stylesheet">
  <link href="vuetify.min.css" rel="stylesheet">
  <link href="uploadfilestyle.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
  <script src="jquery.js"></script>
  <script src="vue.js"></script>
  <script src="vuetify.js"></script>
</head>
<body>

<div id="emails">
  <v-app id="inspire">
    <v-navigation-drawer
      fixed
      :clipped="$vuetify.breakpoint.mdAndUp"
      app
      v-model="drawer"
    >
      <v-list dense>
        <template v-for="item in items" >
          <v-layout
            row
            v-if="item.heading"
            align-center
            :key="item.heading"
          >
            <v-flex xs6>
              <v-subheader v-if="item.heading">
                {{ item.heading }}
              </v-subheader>
            </v-flex>
          </v-layout>
          <v-list-group
            v-else-if="item.tags"
            v-model="item.model"
            :key="item.text"
            :prepend-icon="item.model ? item.icon : item['icon-alt']"
            append-icon=""
          >
            <v-list-tile slot="activator">
              <v-list-tile-content>
                <v-list-tile-title>
                  {{ item.text }}
                </v-list-tile-title>
              </v-list-tile-content>
            </v-list-tile>
            <v-list-tile
              v-for="tag in item.tags"
              :key="tag.search"
              @click="changeDir(tag)"
            >
              <v-list-tile-action v-if="tag.icon">
                <v-icon>{{ tag.icon }}</v-icon>
              </v-list-tile-action>
                <v-list-tile-title>
                  {{ tag.text }}
                </v-list-tile-title>
                <v-spacer></v-spacer>
                <tag-menu ref="tagmenu" :tag="tag"></tag-menu>
            </v-list-tile>
            <v-list-tile
              v-for="call in item.calls"
              :key="call.search"
              @click="changeDir(call)"
            >
              <v-list-tile-action v-if="call.icon">
                <v-icon>{{ call.icon }}</v-icon>
              </v-list-tile-action>
              <v-list-tile-content>
                <v-list-tile-title>
                  {{ call.text }}
                </v-list-tile-title>
              </v-list-tile-content>
            </v-list-tile>
          </v-list-group>
          <v-list-tile v-else @click="changeDir(item)" :key="item.search">
            <v-list-tile-action>
              <v-icon>{{ item.icon }}</v-icon>
            </v-list-tile-action>
            <v-list-tile-content>
              <v-list-tile-title>
                {{ item.text }}
              </v-list-tile-title>
            </v-list-tile-content>
          </v-list-tile>
        </template>
      </v-list>
    </v-navigation-drawer>
    <v-toolbar
      color="blue darken-3"
      dark
      app
      :clipped-left="$vuetify.breakpoint.mdAndUp"
      fixed
    >
      <v-toolbar-title style="width: 300px" class="ml-0 pl-3">
        <v-toolbar-side-icon @click.stop="drawer = !drawer"></v-toolbar-side-icon>
        <span class="hidden-sm-and-down">KamehaMail</span>
      </v-toolbar-title>
      

      <!-- search in emails -->
      <search ref="searchinput"></search>


      <v-spacer></v-spacer>

      <!-- acccess account menu -->
      <account-menu></account-menu>


    </v-toolbar>


    <v-content>

      <v-flex xs12 sm8 offset-sm2 my-5>
          <v-expansion-panel popout>
            <template v-for="item in emaillist">
                <v-subheader
                :key="item.header"
                v-if="item.header"
              >
                {{ item.header }}
              </v-subheader>
              <v-expansion-panel-content v-else :key="item.id" lazy hide-actions>

                  <div slot="header" @click="markRead(item.id);reply = false;">
        
        
                    <!-- each mail's menu -->
                  <mail-menu ref="mailmenu" :mailsubject="item.subject" :mailids="item.ids" :avtags="items[3].tags" :mailtags="item.tags"></mail-menu>
                  </div>

                  <v-divider></v-divider>

                  <!-- group of mail -->
                  <mail-group :emails="item.emails" :subject="item.subject"></mail-group>
                  

                </v-expansion-panel-content>
            </template>  
        </v-expansion-panel> 
      </v-flex>
      <v-spacer></v-spacer>
      <v-layout justify-center><v-btn align="center" @click="getSomeMore()">GIVE ME MORE!!!</v-btn></v-layout>
    </v-content>
    
    <!-- send new email -->
    <new-email ref="newmail"></new-email>

    <v-snackbar
    :timeout="10000"
    :color="alert.color"
    v-model="alert.bar"
  >
    {{ alert.text }}
    <v-btn dark flat @click.native="alert.bar = false">Close</v-btn>
  </v-snackbar>
  </v-app>
</div>

<script src="emails.js"></script>

</body>
</html>